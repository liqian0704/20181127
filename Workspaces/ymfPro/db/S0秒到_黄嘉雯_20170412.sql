CREATE TABLE YMF.TBL_SO_APPLY_RECODE (
  ID                 VARCHAR(50) PRIMARY KEY             NOT NULL,
  MEMBER_NO          VARCHAR(50), --易宝会员号
  AGENT_NO           VARCHAR(50), --代理商号
  MERCHANT_NO        VARCHAR(50), --商号
  TYPE               VARCHAR(20), --开通、关闭、变更
  STATUS             VARCHAR(20), --状态：初始化、通过、拒绝
  SETTLE_BANK_CARD   VARCHAR(50), --结算卡号
  SETTLE_BANK_CODE   VARCHAR(30), --结算银行码
  SETTLE_BANK_NAME   VARCHAR(30), --结算银行名
  SETTLE_BRANCH_CODE VARCHAR(30), --结算银行支行
  SETTLE_BRANCH_NAME VARCHAR(100), --结算分行名
  REMARK             VARCHAR(100), --备注（拒绝原因）
  OPERATOR           VARCHAR(30), --操作人
  CREATE_TIME        TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
  UPDATE_TIME        TIMESTAMP
);
COMMENT ON TABLE YMF.TBL_SO_APPLY_RECODE IS 'S0申请记录单';
CREATE INDEX YMF.SO_APPLY_MEMBER_NO_IDX
  ON YMF.TBL_SO_APPLY_RECODE (MEMBER_NO);
CREATE INDEX YMF.SO_APPLY_CREATE_TIME_IDX
  ON YMF.TBL_SO_APPLY_RECODE (CREATE_TIME);
CREATE INDEX YMF.SO_APPLY_UPDATE_TIME_IDX
  ON YMF.TBL_SO_APPLY_RECODE (UPDATE_TIME);
CREATE SEQUENCE YMF.SEQ_YMF_S0_APPLY_ID AS BIGINT INCREMENT BY 1 START WITH 1 NO MAXVALUE;
GRANT INSERT, UPDATE, DELETE, SELECT ON TABLE YMF.TBL_SO_APPLY_RECODE TO USER YMFAPP;
GRANT SELECT ON TABLE YMF.TBL_SO_APPLY_RECODE TO USER YMFREAD;
GRANT SELECT ON TABLE YMF.TBL_SO_APPLY_RECODE TO USER QUERY;
GRANT USAGE ON SEQUENCE YMF.SEQ_YMF_S0_APPLY_ID TO USER YMFAPP;

ALTER TABLE TBL_USER ADD COLUMN S0_LEVEL VARCHAR(20);

CREATE TABLE YMF.YMF_SETTLE_DETAIL (
  ID                 BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  CUSTOMER_NUMBER    VARCHAR(50)                         NOT NULL, --商户号
  YEEPAY_ORDER_ID    VARCHAR(64)                         NOT NULL, --易宝订单号
  BATCH_ID           VARCHAR(64), --发起出款批次
  SETTLE_AMOUNT      DECIMAL(14, 2), --发起出款金额
  SETTLE_REAL_AMOUNT DECIMAL(14, 2), --实际到账金额
  TRADE_FEE_AMOUNT   DECIMAL(14, 2), --交易手续费
  SETTLE_FEE_AMOUNT  DECIMAL(14, 2), --结算手续费
  BANK_FEE_AMOUNT    DECIMAL(14, 2), --银行手续费
  SETTLE_TYPE        VARCHAR(20)                         NOT NULL, --出款方式：秒到、T1
  SETTLE_TIME        TIMESTAMP, --出款时间
  CREATE_TIME        TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, --记录创建时间
  UPDATE_TIME        TIMESTAMP--更新时间
);
COMMENT ON TABLE YMF.YMF_SETTLE_DETAIL IS '结算详情表';
CREATE INDEX YMF.SETTLE_DETAIL_CUSTOMER_NUMBER_IDX
  ON YMF.YMF_SETTLE_DETAIL (CUSTOMER_NUMBER);
CREATE INDEX YMF.SETTLE_DETAIL_CREATE_TIME_IDX
  ON YMF.YMF_SETTLE_DETAIL (CREATE_TIME);
CREATE INDEX YMF.SETTLE_DETAIL_SETTLE_TIME_IDX
  ON YMF.YMF_SETTLE_DETAIL (SETTLE_TIME);
CREATE INDEX YMF.SETTLE_DETAIL_YEEPAY_ORDER_ID_IDX
  ON YMF.YMF_SETTLE_DETAIL (YEEPAY_ORDER_ID);
GRANT INSERT, UPDATE, DELETE, SELECT ON TABLE YMF.YMF_SETTLE_DETAIL TO USER YMFAPP;
GRANT SELECT ON TABLE YMF.YMF_SETTLE_DETAIL TO USER YMFREAD;
GRANT SELECT ON TABLE YMF.YMF_SETTLE_DETAIL TO USER QUERY;

